!function($){function InfiniteScroll(element,options){this.$el=$(element);if(!this.$el.data("inifinitescroll")){this.proxy("_scroll").proxy("load_more").proxy("content").proxy("_content");options=$.extend({},$.fn.inifinitescroll.defaults,options);$.extend(this,options);this.$el.data("inifinitescroll",this);this.init()}}InfiniteScroll.prototype={init:function(){if(this.scroll){$(window).scroll(this._scroll)}this.$el.click(this.load_more);this.$container=$(this.$el.data("container"));this._url=this.$el.attr("href");this.step=typeof this.step=="string"?parseInt(this.$el.attr(this.step),10):this.step},_scroll:function(){if($(window).scrollTop()>=$(document).height()-$(window).height()-this.tollerance){this.load_more()}},load_more:function(e){if(e&&e.type=="click"){e.preventDefault()}if(!this.$el.is(":hidden")){this.$el.hide();$("#"+this.loading_element).show();this.start(e);$.get(this.url(),this._content)}},_content:function(data){this.pageNumber+=this.step;this.$el.show();$("#"+this.loading_element).hide();this.finish(data)},start:function(e){},finish:function(content){},url:function(){return this._url+(this._url.match(/\?/)?"&":"?")+this.query.replace("{pageNumber}",this.pageNumber).replace("{pageSize}",this.pageSize)},proxy:function(meth){this[meth]=$.proxy(this[meth],this);return this}};$.fn.inifinitescroll=function(options){return this.each(function(){new InfiniteScroll(this,options)})};$.fn.inifinitescroll.InfinateScroll=InfiniteScroll;$.fn.inifinitescroll.defaults={tollerance:300,scroll:true,step:1,offset:0,pageNumber:1,pageSize:10,query:"pageNumber={pageNumber}&pageSize={pageSize}",loading_class:"loading",loading_element:"loadingSpan"}}(window.jQuery||window.ender);